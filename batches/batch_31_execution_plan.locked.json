{
  "phases": [
    {
      "phase_id": 31,
      "phase_title": "Phase 31: Performance Profiling and Optimization",
      "batches": [
        {
          "batch_id": "31.0",
          "title": "Profiling Tool Integration & Baseline",
          "prompt": "Integrate the reusable profiling tool (`/home/ubuntu/personal-ai-agent/app/tools/performance_profiler.py`) into key components (controller, agents, validators). Ensure profiling data is logged to `/home/ubuntu/personal-ai-agent/app/memory/performance_profile_log.json` conforming to `/home/ubuntu/personal-ai-agent/app/schemas/performance_profile_log.schema.json` (v1.0). Ensure schema exists. Initialize the log file. Establish baseline performance metrics by re-running a representative subset of Phase 29 functional test scenarios (from the revised Phase 29 plan) with profiling enabled.\n\nRepo Sync Protocol Note: Assume current local repo state.\n\n**CRITICAL FILE HANDLING INSTRUCTION (NON-NEGOTIABLE FOR AUDIT INTEGRITY):**\nFor any of the following critical files if modified or created by this batch (`file_tree.json`, `promethios_file_tree_plan.v3.1.5_runtime_synced.json`, `wiring_manifest.updated_phase22_36.json`, `loop_justification_log.json`, `agent_trust_score.json`, `agent_cognitive_budget.json`, `belief_weight_index.json`, `mutation_backlog.json`, `legacy_alignment_tracker.json`, `operator_override_log.json`, `loop_summary.json`, `reflection_thread.json`, `performance_profile_log.json`):\n1.  **ALWAYS Load the FULL prior version of the file.**\n2.  **ALWAYS Append/merge new changes schema-conformantly.**\n3.  **ALWAYS Save and ensure the ENTIRE, COMPLETE file (NO PARTIALS, NO DELTAS) is the output and is available for subsequent operations.**\nThis applies to all memory surfaces, logs, and tracking files.\n\n**File Output Formalization for this Batch (31.0):**\n1.  **Wiring Manifest (`/home/ubuntu/wiring_manifest.updated_phase22_36.json`):**\n    For each loop executed during baseline performance testing in this batch:\n    - Append a new JSON object entry to `/home/ubuntu/wiring_manifest.updated_phase22_36.json`.\n    - Entry fields: `batch_id`: \"31.0\", `loop_id`: \"<baseline_test_loop_id>\", `controller_invoked`: \"loop_controller.py\", `memory_surfaces_written`: [\"/home/ubuntu/personal-ai-agent/app/memory/performance_profile_log.json\", ...other_relevant_logs], `timestamp`: \"<ISO_8601_timestamp>\", `schema_version`: \"1.0\".\n    - Use \"unknown\" for undeterminable values; do not omit keys.\n2.  **File Tree (`/home/ubuntu/file_tree.updated_post_phase36.json`):**\n    Upon batch completion:\n    - Read the current `/home/ubuntu/file_tree.updated_post_phase36.json`.\n    - Add/update entries for files created/modified *by this batch* (31.0) (e.g., `/home/ubuntu/personal-ai-agent/app/memory/performance_profile_log.json`, modified tool/components).    - Entry fields: `path`: \"<absolute_path>\", `status`: \"<created/modified>\", `type`: \"<file/directory/unknown>\", `added_by`: \"<agent_id_or_script>\".\n    - Write back the merged file tree.\n3.  **Promethios File Tree Plan (`/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json`):**\n    Upon batch completion:\n    - Regenerate/update `/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json`.\n    - It must list all files from Phase 22 up to this batch\"s (31.0) completion.\n    - Entry fields: `path`: \"<absolute_path>\", `type`: \"<file/directory/unknown>\", `status`: \"<created/modified/existing>\", `batch_id`: \"<batch_id_of_creation_or_last_update>\", `added_by`: \"<agent_id_or_script>\".\n    - Ensure consistency with the updated `/home/ubuntu/file_tree.updated_post_phase36.json`.",
          "expected_output": "Profiling tool integrated. `/home/ubuntu/personal-ai-agent/app/memory/performance_profile_log.json` initialized and populated with baseline data.",
          "verification_steps": [
            "Confirm profiling tool integrated.",
            "Confirm `/home/ubuntu/personal-ai-agent/app/memory/performance_profile_log.json` initialized and populated with baseline data (ensure entire file was handled correctly).",
            "Confirm `/home/ubuntu/wiring_manifest.updated_phase22_36.json` was updated for test loops in this batch (ensure entire file was handled correctly).",
            "Confirm `/home/ubuntu/file_tree.updated_post_phase36.json` was updated to reflect changes from this batch (ensure entire file was handled correctly).",
            "Confirm `/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json` was updated/regenerated reflecting this batch (ensure entire file was handled correctly).",
            "**CRITICAL VERIFICATION:** Confirm that ALL critical files modified/created in this batch (including `performance_profile_log.json`, `wiring_manifest.updated_phase22_36.json`, `file_tree.updated_post_phase36.json`, `promethios_file_tree_plan.v3.1.5_runtime_synced.json`) were handled by: 1. Loading the FULL prior version. 2. Appending/merging new changes schema-conformantly. 3. Saving the ENTIRE, COMPLETE file. NO PARTIALS OR DELTAS ACCEPTED.",
            "Update `verified` status for batch 31.0 to `true`."
          ],
          "verified": false,
          "git_commit_hash": "placeholder",
          "pr_id": "placeholder",
          "dependencies": [
            "30.3"
          ]
        },
        {
          "batch_id": "31.1",
          "title": "Bottleneck Analysis",
          "prompt": "Analyze the baseline performance data from `performance_profile_log.json`. Identify potential bottlenecks (high execution time, call counts, memory usage). Document findings in `/home/ubuntu/personal-ai-agent/reports/performance_bottleneck_report.md`.\n\nRepo Sync Protocol Note: Assume current local repo state.\n\n**CRITICAL FILE HANDLING INSTRUCTION (NON-NEGOTIABLE FOR AUDIT INTEGRITY):**\nFor any of the following critical files if modified or created by this batch (`file_tree.json`, `promethios_file_tree_plan.v3.1.5_runtime_synced.json`, `wiring_manifest.updated_phase22_36.json`, `loop_justification_log.json`, `agent_trust_score.json`, `agent_cognitive_budget.json`, `belief_weight_index.json`, `mutation_backlog.json`, `legacy_alignment_tracker.json`, `operator_override_log.json`, `loop_summary.json`, `reflection_thread.json`, `performance_profile_log.json`):\n1.  **ALWAYS Load the FULL prior version of the file.**\n2.  **ALWAYS Append/merge new changes schema-conformantly.**\n3.  **ALWAYS Save and ensure the ENTIRE, COMPLETE file (NO PARTIALS, NO DELTAS) is the output and is available for subsequent operations.**\nThis applies to all memory surfaces, logs, and tracking files.\n\n**File Output Formalization for this Batch (31.1):**\n1.  **Wiring Manifest (`/home/ubuntu/wiring_manifest.updated_phase22_36.json`):**\n    For the analysis activity in this batch:\n    - Append a new JSON object entry to `/home/ubuntu/wiring_manifest.updated_phase22_36.json`.\n    - Entry fields: `batch_id`: \"31.1\", `loop_id`: \"analysis_bottleneck_31.1\", `controller_invoked`: \"<analysis_script_or_manual_process>\", `memory_surfaces_written`: [\"/home/ubuntu/personal-ai-agent/reports/performance_bottleneck_report.md\"], `timestamp`: \"<ISO_8601_timestamp>\", `schema_version`: \"1.0\".\n    - Use \"unknown\" for undeterminable values; do not omit keys.\n2.  **File Tree (`/home/ubuntu/file_tree.updated_post_phase36.json`):**\n    Upon batch completion:\n    - Read the current `/home/ubuntu/file_tree.updated_post_phase36.json`.\n    - Add/update entries for files created/modified *by this batch* (31.1) (e.g., `/home/ubuntu/personal-ai-agent/reports/performance_bottleneck_report.md`).    - Entry fields: `path`: \"<absolute_path>\", `status`: \"<created/modified>\", `type`: \"<file/directory/unknown>\", `added_by`: \"<agent_id_or_script>\".\n    - Write back the merged file tree.\n3.  **Promethios File Tree Plan (`/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json`):**\n    Upon batch completion:\n    - Regenerate/update `/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json`.\n    - It must list all files from Phase 22 up to this batch\"s (31.1) completion.\n    - Entry fields: `path`: \"<absolute_path>\", `type`: \"<file/directory/unknown>\", `status`: \"<created/modified/existing>\", `batch_id`: \"<batch_id_of_creation_or_last_update>\", `added_by`: \"<agent_id_or_script>\".\n    - Ensure consistency with the updated `/home/ubuntu/file_tree.updated_post_phase36.json`.",
          "expected_output": "`/home/ubuntu/personal-ai-agent/reports/performance_bottleneck_report.md` created with bottleneck analysis.",
          "verification_steps": [
            "Confirm `/home/ubuntu/personal-ai-agent/reports/performance_bottleneck_report.md` created with analysis.",
            "Confirm `/home/ubuntu/wiring_manifest.updated_phase22_36.json` was updated for analysis activity in this batch (ensure entire file was handled correctly).",
            "Confirm `/home/ubuntu/file_tree.updated_post_phase36.json` was updated to reflect changes from this batch (ensure entire file was handled correctly).",
            "Confirm `/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json` was updated/regenerated reflecting this batch (ensure entire file was handled correctly).",
            "**CRITICAL VERIFICATION:** Confirm that ALL critical files modified/created in this batch (including `performance_profile_log.json`, `wiring_manifest.updated_phase22_36.json`, `file_tree.updated_post_phase36.json`, `promethios_file_tree_plan.v3.1.5_runtime_synced.json`) were handled by: 1. Loading the FULL prior version. 2. Appending/merging new changes schema-conformantly. 3. Saving the ENTIRE, COMPLETE file. NO PARTIALS OR DELTAS ACCEPTED.",
            "Update `verified` status for batch 31.1 to `true`."
          ],
          "verified": false,
          "git_commit_hash": "placeholder",
          "pr_id": "placeholder",
          "dependencies": [
            "31.0"
          ]
        },
        {
          "batch_id": "31.2",
          "title": "Implement Targeted Optimizations",
          "prompt": "Based on the bottleneck report, implement targeted optimizations (algorithm refinement, caching, reducing redundancy, memory optimization). Document optimizations applied in `/home/ubuntu/personal-ai-agent/reports/optimizations_applied_report_31.2.md`.\n\nRepo Sync Protocol Note: Assume current local repo state.\n\n**CRITICAL FILE HANDLING INSTRUCTION (NON-NEGOTIABLE FOR AUDIT INTEGRITY):**\nFor any of the following critical files if modified or created by this batch (`file_tree.json`, `promethios_file_tree_plan.v3.1.5_runtime_synced.json`, `wiring_manifest.updated_phase22_36.json`, `loop_justification_log.json`, `agent_trust_score.json`, `agent_cognitive_budget.json`, `belief_weight_index.json`, `mutation_backlog.json`, `legacy_alignment_tracker.json`, `operator_override_log.json`, `loop_summary.json`, `reflection_thread.json`, `performance_profile_log.json`):\n1.  **ALWAYS Load the FULL prior version of the file.**\n2.  **ALWAYS Append/merge new changes schema-conformantly.**\n3.  **ALWAYS Save and ensure the ENTIRE, COMPLETE file (NO PARTIALS, NO DELTAS) is the output and is available for subsequent operations.**\nThis applies to all memory surfaces, logs, and tracking files.\n\n**File Output Formalization for this Batch (31.2):**\n1.  **Wiring Manifest (`/home/ubuntu/wiring_manifest.updated_phase22_36.json`):**\n    For the optimization activities in this batch:\n    - Append a new JSON object entry to `/home/ubuntu/wiring_manifest.updated_phase22_36.json`.\n    - Entry fields: `batch_id`: \"31.2\", `loop_id`: \"optimization_implementation_31.2\", `controller_invoked`: \"<script_or_manual_code_changes>\", `memory_surfaces_written`: [\"/home/ubuntu/personal-ai-agent/reports/optimizations_applied_report_31.2.md\"], `timestamp`: \"<ISO_8601_timestamp>\", `schema_version`: \"1.0\".\n    - Use \"unknown\" for undeterminable values; do not omit keys.\n2.  **File Tree (`/home/ubuntu/file_tree.updated_post_phase36.json`):**\n    Upon batch completion:\n    - Read the current `/home/ubuntu/file_tree.updated_post_phase36.json`.\n    - Add/update entries for files created/modified *by this batch* (31.2) (e.g., `/home/ubuntu/personal-ai-agent/reports/optimizations_applied_report_31.2.md`, modified code components).    - Entry fields: `path`: \"<absolute_path>\", `status`: \"<created/modified>\", `type`: \"<file/directory/unknown>\", `added_by`: \"<agent_id_or_script>\".\n    - Write back the merged file tree.\n3.  **Promethios File Tree Plan (`/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json`):**\n    Upon batch completion:\n    - Regenerate/update `/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json`.\n    - It must list all files from Phase 22 up to this batch\"s (31.2) completion.\n    - Entry fields: `path`: \"<absolute_path>\", `type`: \"<file/directory/unknown>\", `status`: \"<created/modified/existing>\", `batch_id`: \"<batch_id_of_creation_or_last_update>\", `added_by`: \"<agent_id_or_script>\".\n    - Ensure consistency with the updated `/home/ubuntu/file_tree.updated_post_phase36.json`.",
          "expected_output": "Relevant code components updated with optimizations. `/home/ubuntu/personal-ai-agent/reports/optimizations_applied_report_31.2.md` created.",
          "verification_steps": [
            "Confirm relevant code components updated.",
            "Confirm `/home/ubuntu/personal-ai-agent/reports/optimizations_applied_report_31.2.md` created and documents optimizations.",
            "Confirm `/home/ubuntu/wiring_manifest.updated_phase22_36.json` was updated for optimization activities in this batch (ensure entire file was handled correctly).",
            "Confirm `/home/ubuntu/file_tree.updated_post_phase36.json` was updated to reflect changes from this batch (ensure entire file was handled correctly).",
            "Confirm `/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json` was updated/regenerated reflecting this batch (ensure entire file was handled correctly).",
            "**CRITICAL VERIFICATION:** Confirm that ALL critical files modified/created in this batch (including `performance_profile_log.json`, `wiring_manifest.updated_phase22_36.json`, `file_tree.updated_post_phase36.json`, `promethios_file_tree_plan.v3.1.5_runtime_synced.json`) were handled by: 1. Loading the FULL prior version. 2. Appending/merging new changes schema-conformantly. 3. Saving the ENTIRE, COMPLETE file. NO PARTIALS OR DELTAS ACCEPTED.",
            "Update `verified` status for batch 31.2 to `true`."
          ],
          "verified": false,
          "git_commit_hash": "placeholder",
          "pr_id": "placeholder",
          "dependencies": [
            "31.1"
          ]
        },
        {
          "batch_id": "31.3",
          "title": "Post-Optimization Benchmarking",
          "prompt": "Re-run the same subset of Phase 29 scenarios used for baseline (31.0) with profiling enabled. Collect new performance data in `performance_profile_log.json`. Compare post-optimization metrics against baseline. Summarize findings in `/home/ubuntu/personal-ai-agent/reports/optimization_impact_report.md`.\n\nRepo Sync Protocol Note: Assume current local repo state.\n\n**CRITICAL FILE HANDLING INSTRUCTION (NON-NEGOTIABLE FOR AUDIT INTEGRITY):**\nFor any of the following critical files if modified or created by this batch (`file_tree.json`, `promethios_file_tree_plan.v3.1.5_runtime_synced.json`, `wiring_manifest.updated_phase22_36.json`, `loop_justification_log.json`, `agent_trust_score.json`, `agent_cognitive_budget.json`, `belief_weight_index.json`, `mutation_backlog.json`, `legacy_alignment_tracker.json`, `operator_override_log.json`, `loop_summary.json`, `reflection_thread.json`, `performance_profile_log.json`):\n1.  **ALWAYS Load the FULL prior version of the file.**\n2.  **ALWAYS Append/merge new changes schema-conformantly.**\n3.  **ALWAYS Save and ensure the ENTIRE, COMPLETE file (NO PARTIALS, NO DELTAS) is the output and is available for subsequent operations.**\nThis applies to all memory surfaces, logs, and tracking files.\n\n**File Output Formalization for this Batch (31.3):**\n1.  **Wiring Manifest (`/home/ubuntu/wiring_manifest.updated_phase22_36.json`):**\n    For each loop executed during post-optimization benchmarking in this batch:\n    - Append a new JSON object entry to `/home/ubuntu/wiring_manifest.updated_phase22_36.json`.\n    - Entry fields: `batch_id`: \"31.3\", `loop_id`: \"<post_optimization_test_loop_id>\", `controller_invoked`: \"loop_controller.py\", `memory_surfaces_written`: [\"/home/ubuntu/personal-ai-agent/app/memory/performance_profile_log.json\", \"/home/ubuntu/personal-ai-agent/reports/optimization_impact_report.md\", ...other_relevant_logs], `timestamp`: \"<ISO_8601_timestamp>\", `schema_version`: \"1.0\".\n    - Use \"unknown\" for undeterminable values; do not omit keys.\n2.  **File Tree (`/home/ubuntu/file_tree.updated_post_phase36.json`):**\n    Upon batch completion:\n    - Read the current `/home/ubuntu/file_tree.updated_post_phase36.json`.\n    - Add/update entries for files created/modified *by this batch* (31.3) (e.g., `/home/ubuntu/personal-ai-agent/reports/optimization_impact_report.md`, updates to `performance_profile_log.json`).    - Entry fields: `path`: \"<absolute_path>\", `status`: \"<created/modified>\", `type`: \"<file/directory/unknown>\", `added_by`: \"<agent_id_or_script>\".\n    - Write back the merged file tree.\n3.  **Promethios File Tree Plan (`/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json`):**\n    Upon batch completion:\n    - Regenerate/update `/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json`.\n    - It must list all files from Phase 22 up to this batch\"s (31.3) completion.\n    - Entry fields: `path`: \"<absolute_path>\", `type`: \"<file/directory/unknown>\", `status`: \"<created/modified/existing>\", `batch_id`: \"<batch_id_of_creation_or_last_update>\", `added_by`: \"<agent_id_or_script>\".\n    - Ensure consistency with the updated `/home/ubuntu/file_tree.updated_post_phase36.json`.",
          "expected_output": "`performance_profile_log.json` updated with post-optimization data. `/home/ubuntu/personal-ai-agent/reports/optimization_impact_report.md` created.",
          "verification_steps": [
            "Confirm `performance_profile_log.json` updated with post-optimization data (ensure entire file was handled correctly).",
            "Confirm `/home/ubuntu/personal-ai-agent/reports/optimization_impact_report.md` created.",
            "Confirm `/home/ubuntu/wiring_manifest.updated_phase22_36.json` was updated for test loops in this batch (ensure entire file was handled correctly).",
            "Confirm `/home/ubuntu/file_tree.updated_post_phase36.json` was updated to reflect changes from this batch (ensure entire file was handled correctly).",
            "Confirm `/home/ubuntu/promethios_file_tree_plan.v3.1.5_runtime_synced.json` was updated/regenerated reflecting this batch (ensure entire file was handled correctly).",
            "**CRITICAL VERIFICATION:** Confirm that ALL critical files modified/created in this batch (including `performance_profile_log.json`, `wiring_manifest.updated_phase22_36.json`, `file_tree.updated_post_phase36.json`, `promethios_file_tree_plan.v3.1.5_runtime_synced.json`) were handled by: 1. Loading the FULL prior version. 2. Appending/merging new changes schema-conformantly. 3. Saving the ENTIRE, COMPLETE file. NO PARTIALS OR DELTAS ACCEPTED.",
            "Update `verified` status for batch 31.3 to `true`."
          ],
          "verified": false,
          "git_commit_hash": "placeholder",
          "pr_id": "placeholder",
          "dependencies": [
            "31.2"
          ]
        }
      ]
    }
  ]
}
