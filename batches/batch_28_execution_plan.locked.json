{
  "phase_id": 28,
  "phase_title": "Phase 28: Final Integrity Sweep",
  "batches": [
    {
      "batch_id": "28.0",
      "title": "Validate file_tree.json Structure",
      "prompt": "Validate the structure and content of `/home/ubuntu/personal-ai-agent/app/memory/file_tree.json` against its schema defined in `/home/ubuntu/personal-ai-agent/app/schemas/file_tree.schema.json`. Ensure the schema includes `schema_version`: `v1.0`. Log the validation results, clearly indicating success or detailing any failures. Ensure the schema file exists.\n\nRepo Sync Protocol Note: Do not perform `git pull` operations before explicitly instructed to do so in a dedicated repo synchronization batch. Assume the current local repository state is the intended state for this batch.",
      "expected_output": "Log entry confirming successful validation of file_tree.json against its schema, or a detailed error report if validation fails.",
      "verified": false,
      "git_commit_hash": "placeholder",
      "pr_id": "placeholder",
      "dependencies": [
        "27.4" 
      ]
    },
    {
      "batch_id": "28.1",
      "title": "Execute Cross-Surface Consistency Audit",
      "prompt": "Execute the centralized audit script `/home/ubuntu/personal-ai-agent/app/validators/run_integrity_sweep.py` with the mode argument set to \"surface_consistency\". This script must compare `/home/ubuntu/personal-ai-agent/app/memory/file_tree.json`, `/home/ubuntu/personal-ai-agent/app/memory/wiring_manifest.json`, and `/home/ubuntu/personal-ai-agent/config/promethios_file_tree_plan.v3.1.4_runtime_synced.json` to identify discrepancies. Output all findings to `/home/ubuntu/personal-ai-agent/app/logs/surface_integrity_matrix.json`. Each finding must include a `severity` field (
'info
', 
'warning
', 
'error
') and relevant location details. Ensure the output conforms to `/home/ubuntu/personal-ai-agent/app/schemas/surface_integrity_matrix.schema.json` (v1.0). Ensure the schema and validator script exist. Create the logs directory `/home/ubuntu/personal-ai-agent/app/logs` if needed.\n\nRepo Sync Protocol Note: Do not perform `git pull` operations before explicitly instructed to do so in a dedicated repo synchronization batch. Assume the current local repository state is the intended state for this batch.",
      "expected_output": "`/home/ubuntu/personal-ai-agent/app/logs/surface_integrity_matrix.json` file containing a list of identified surface inconsistencies, each with a severity level.",
      "verified": false,
      "git_commit_hash": "placeholder",
      "pr_id": "placeholder",
      "dependencies": [
        "28.0"
      ]
    },
    {
      "batch_id": "28.2",
      "title": "Execute Agent Drift vs. Trust Correlation Audit",
      "prompt": "Execute the centralized audit script `/home/ubuntu/personal-ai-agent/app/validators/run_integrity_sweep.py` with the mode argument set to \"drift_trust_correlation\". This script must analyze `/home/ubuntu/personal-ai-agent/app/memory/emotion_drift_tracker.json` and relevant agent trust score sources to identify potential correlations between significant emotional drift and changes in trust scores. Output findings to `/home/ubuntu/personal-ai-agent/app/logs/agent_drift_correlation_log.json`. Each finding must include a `severity` field (
'info
', 
'warning
', 
'error
') and relevant agent/loop identifiers. Ensure the output conforms to `/home/ubuntu/personal-ai-agent/app/schemas/agent_drift_correlation_log.schema.json` (v1.0). Ensure the schema exists.\n\nRepo Sync Protocol Note: Do not perform `git pull` operations before explicitly instructed to do so in a dedicated repo synchronization batch. Assume the current local repository state is the intended state for this batch.",
      "expected_output": "`/home/ubuntu/personal-ai-agent/app/logs/agent_drift_correlation_log.json` file containing identified correlations between agent drift and trust changes, each with a severity level.",
      "verified": false,
      "git_commit_hash": "placeholder",
      "pr_id": "placeholder",
      "dependencies": [
        "28.0"
      ]
    },
    {
      "batch_id": "28.3",
      "title": "Execute Justification Linkage Validation Audit",
      "prompt": "Execute the centralized audit script `/home/ubuntu/personal-ai-agent/app/validators/run_integrity_sweep.py` with the mode argument set to \"justification_linkage\". This script must scan `/home/ubuntu/personal-ai-agent/app/memory/loop_justification_log.json`, parse references to beliefs and surfaces, and validate their existence and consistency against `/home/ubuntu/personal-ai-agent/app/memory/belief_surface.json` and `/home/ubuntu/personal-ai-agent/app/memory/file_tree.json` respectively. Output anomalies to `/home/ubuntu/personal-ai-agent/app/logs/justification_trace_anomaly_log.json`. Each anomaly must include a `severity` field (
'info
', 
'warning
', 
'error
') and relevant loop/justification identifiers. Ensure the output conforms to `/home/ubuntu/personal-ai-agent/app/schemas/justification_trace_anomaly_log.schema.json` (v1.0). Ensure the schema exists.\n\nRepo Sync Protocol Note: Do not perform `git pull` operations before explicitly instructed to do so in a dedicated repo synchronization batch. Assume the current local repository state is the intended state for this batch.",
      "expected_output": "`/home/ubuntu/personal-ai-agent/app/logs/justification_trace_anomaly_log.json` file containing identified anomalies in justification linkages, each with a severity level.",
      "verified": false,
      "git_commit_hash": "placeholder",
      "pr_id": "placeholder",
      "dependencies": [
        "28.0"
      ]
    },
    {
      "batch_id": "28.4",
      "title": "Final Review and PR Staging Preparation",
      "prompt": "Review all generated audit logs from batches 28.1, 28.2, and 28.3. Address any findings marked with 
'error
' severity. Once all critical issues are resolved or documented, prepare all artifacts generated or modified during Phases 16 through 28 for staging in a final Pull Request. Document the review outcome and readiness status.\n\nRepo Sync Protocol Note: Do not perform `git pull` operations before explicitly instructed to do so in a dedicated repo synchronization batch. Assume the current local repository state is the intended state for this batch.",
      "expected_output": "Log entry confirming the review of audit logs, resolution or documentation of critical issues, and confirmation that all Phase 16-28 artifacts are prepared for PR staging.",
      "verified": false,
      "git_commit_hash": "placeholder",
      "pr_id": "placeholder",
      "dependencies": [
        "28.1",
        "28.2",
        "28.3"
      ]
    }
  ]
}

